## 🧱 블록체인

#### 블록체인이란?
  - 블록체인은 흔히 말하는 분산 데이터 장부라고 불리며 비트코인에 주로 사용되고 있습니다.
  이들은 P2P 방식을 기반으로 생성된 블록들이 체인 형태로 연결되어 있다고 해서 블록 체인이라고 명칭하게 되었습니다.
  블록체인은 모든 블록에 거래 과정 즉, 트랜젝션에 대한 정보가 저장되어 있으며, 누구나 해당 정보를 열람할 수 있지만, 변경이 불가능하여 보안성이 뛰어나다고 볼 수 있습니다.
  
  
#### 블록체인의 구조
  - 초기 블록이 존재하며 이후 생겨나는 블록은 맨 처음에 이전 블록의 해쉬를 저장하며 가르키는 구조를 가지며, 이후 증명을 할 때 모든 블록의 정보가 일치하는 지를 확인하여 증명합니다. 따라서 해커의 입장에서 이 모든 블록을 수정한다는 것은 시간적으로 매우 불가능하다 라는 것이 블록체인의 장점 중 하나입니다.


#### 이더리움(Ethereum)이란?
- 이더리움은 블록체인 기술을 기반으로 하는 분산 컴퓨팅 플랫폼입니다. 이더리움의 가장 큰 특징은 스마트 컨트랙트의 기능을 새롭게 확장하여 적용하였다는 점입니다. 이더리움은 스마트 컨트랙터를 새로운 블록체인의 기술로써 전면에 내세웠습니다. 스마트 컨트랙트만을 위한 언어(Solidity, LLL 등)를 개발하였고 이들을 실행시키기 위한 가상 머신(EVM, Ethereum Virtual Machine)도 제작하였습니다. 이더리움의 스마트 컨트랙트는 반복문을 포함하여 좀 더 복잡한 로직을 구현할 수 있는 튜링 완전 언어입니다.

#### 이더리움의 특징
- 암호 해쉬함수가 있습니다. 이더리움은 저항성을 향상하고 채굴의 중앙화를 해소하기 위해 Ethash라는 KECCACK 기반의 해시 알고리즘을 개발하여 사용하고 있습니다. 
- Modified Merkle Patricia Trie(MPT) 입니다. MPT는 트랜잭션 데이터의 위변조 감지 및 스마트 컨트랙트 관련 상태 정보를 저장, 관리하기 위한 기술입니다. 이를 위해 이더리움에서는 머클 트리(Merkle Tree)를 Patricia Trie와 접목시킨 MPT를 사용하여 상태 정보를 key-value 형식으로 저장하며 관리합니다. 
- 암호 화폐의 관리 기술입니다. 이더리움은 '사용자 계정'에 기반하여 암호 화폐를 관리합니다. 즉, 이더리움은 사용자를 중심으로 관리한다고 얘기할 수 있습니다.

#### 정리

현재 발생하고 있는 금융 거래 기록들은 VISA, Master Card 그리고 각 은행 등 금융기관을 통해 관리되고 있다. 하지만, 암호화 화폐의 거래에 있어서는 누구나 금융기관의 역할을 할 수 있다. 블록체인 기록을 다운로드 받으면 블록체인 P2P 네트워크의 일원으로서 이 기록을 가진 사람들이 ‘노드’라고 불리며, 각자의 금융기관의 역할을 하게 된다. 이 노드의 과반수 이상이 동의했을 때, 기록으로서 영구적으로 장부에 기록된다. 

블록체인에 있어서는 한 명이 하나의 투표권을 가지는 선거 제도와는 달리 블록이 생성되는 합의과정에서 가장 많은 ‘작업’을 한 노드가 어느 기록이 참인지 결정할 수 있는 권한을 더 많이 가지게 된다. 이것이 바로 ‘작업증명’이라는 것이다. 작업증명을 통해 블록에 거래 내역을 정리해주고 그 보상으로 코인과 거래 수수료를 받게 되는데 이 과정을 ‘채굴’이라고 한다. 블록체인이 유지되기 위해 필요한 리소스를 제공하면, 이에 따른 보상을 받는 개념이다.

##### 채굴 = 작업증명 + 보상
 
– 암호화폐의 거래 내역을 기록한 블록을 생성하고 그 대가로 암호화폐를 얻는 행위를 말한다. 1개의 암호화폐를 생성하기 위해서는 마치 금과 같은 광물을 캐는 것처럼 많은 시간과 노력이 필요한 작업이기 때문에 채굴이라는 표현을 사용한다.
채굴이란 블록체인 참여자로써 검증에 참여해 암호화폐를 얻는 것이다. 블록체인 기반의 암호화폐에서 새로운 블록을 생성하고 그 대가로 암호화폐를 지급받는 사람을 채굴자라고 한다.

Ex) 비트코인 화폐는 10분에 한 번씩 일정량의 코인이 생성이 되는데 이 생성된 비트코인은 채굴에 참여한 작업자 중 해시캐시라는 문제를 푼 작업자에게 지급되며 해시캐시는 특정한 조건을 갖춘 해시를 찾아내는 일련의 과정을 말한다.

실물 자산과 블록체인 상에 저장되는 디지털 정보 간의 연결성과 신뢰성을 기술적으로 어떻게 해결해야 하는가 – 이슈 -> 이를 해결하기 위한 블록체인 프로젝트가 한 축을 이룸

블록에 기록되는 모든 기록은 위와 같이 연산을 거쳐 1.,2,3,4,5,6,7,8,9,0,a,b,c,d,e,f 16개로 구성된 16진수의 숫자로 ‘암호화’되는데, 이 과정을 ‘해싱(hashing)’이라고 한다. 같은 문장이라고 하더라도 마침표를 추가한 경우 해시 값은 완전히 다르다. 그렇기 때문에 해시 값으로부터 기록을 역추적하기 힘들고 내용을 조금이라도 조작 하는 경우는 해시 값 자체가 변하기 때문에 데이터 손상 여부를 금방 확인할 수 있다. 기록이 안전하게 보관되고, 위/변조가 거의 불가능하다는 것이다. 블록체인의 이런 특성으로 인해서 ‘암호화 화폐’라고 불린다. 

- 해쉬, 논스 그리고 해쉬파워
작업증명의 과정은 컴퓨터 연산을 통해 이루어 진다. 거래내역을 암호화 해야 한다. 암호화를 위해서는 ‘SHA256’라는 해시 함수 프로그램이 사용된다. 
‘A가 B에게 1 비트코인을 전송했다.’ 이 내용을 블록이 인식하면 블록 안에서는 논스(Nonce)라는 무작위의 숫자가 SHA256에 대입된다. 
 
논스값을 0부터 1씩 반복해서 늘려가며 그 결과로 그림처럼 여러 해쉬값이 나오는데, 논스는 블록이 설정해 놓은 특정 해시 값보다 작은 숫자가 나올 때까지 계속 대입된다. 블록 안에서 nonce값을 대입해 블록이 설정한 난이도보다 낮은 숫자를 찾았을 때, ‘A가 B에게 1 비트코인을 전송했다’는 내용을 해쉬값으로 암호화 하여 블록에 기록되고 작업이 완료된다. 여기까지가 작업증명을 마친 것이다. 
작업 증명 시스템에서는 블록의 난이도가 설정한 숫자보다 작은 숫자를 더 빠르고 많이 찾을 수록 블록체인에 기록하는 과정에서 더 많은 권한이 부여된다. 연산력(=해시파워)이 좋은 컴퓨터를 가질수록 블록의 기록에 더 관여할 수 있게 된다. 

- 암호화 된 거래내역을 위/변조 할 수 없는 이유
거래내역을 위/변조를 하기 위해서는 두가지 조건을 충족시켜야 한다.
첫째, 해당 블록의 해시 값을 통해 연결된 모든 블록의 정보를 연쇄적으로 다 바꾸어야 한다.
두번째, 10분에 하나씩 생성되는 블록보다 더 빠르게 위/변조한 정보를 전파시켜야 하는데, 이는 실존하는 세계에서 가장 빠른 슈퍼컴퓨터의 성능을 넘는 연산력을 요구하기 때문에 현실적으로 실현이 불가능하다.


